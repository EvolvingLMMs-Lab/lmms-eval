# PR Code Review Skill

è‡ªåŠ¨åŒ–çš„ã€å…¨é¢çš„ GitHub PR ä»£ç å®¡æŸ¥å·¥å…·ï¼Œä½¿ç”¨ 5 ä¸ªå¹¶è¡Œ AI agent ä»å¤šä¸ªç»´åº¦è¿›è¡Œæ·±åº¦æ£€æŸ¥ã€‚

## ç‰¹æ€§

âœ… **8 æ­¥ç³»ç»ŸåŒ–æµç¨‹**ï¼šä»èµ„æ ¼æ£€æŸ¥åˆ°å‘å¸ƒè¯„è®ºï¼Œå®Œæ•´è‡ªåŠ¨åŒ–
âœ… **5 ç»´åº¦å¹¶è¡Œå®¡æŸ¥**ï¼šCLAUDE.md åˆè§„æ€§ã€bug æ‰«æã€git å†å²ã€PR æ¨¡å¼ã€ä»£ç æ³¨é‡Š
âœ… **0-5 åˆ†è¯„åˆ†ç³»ç»Ÿ**ï¼šåªæŠ¥å‘Šé«˜å¯ä¿¡åº¦é—®é¢˜ï¼ˆè¯„åˆ† >= 4ï¼‰
âœ… **è‡ªåŠ¨å‘å¸ƒè¯„è®º**ï¼šç›´æ¥åœ¨ GitHub PR ä¸Šå‘å¸ƒæ ¼å¼åŒ–çš„ review
âœ… **è¯¯æŠ¥è¿‡æ»¤**ï¼šæ™ºèƒ½è¯†åˆ«é¢„å­˜é—®é¢˜ã€é£æ ¼é—®é¢˜ã€linter å¯æ•è·çš„é—®é¢˜

## å¿«é€Ÿå¼€å§‹

### å®¡æŸ¥å•ä¸ª PR

```bash
# åœ¨ Claude Code ä¸­
> Review PR #945
```

Claude ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥ PR æ˜¯å¦å¯ä»¥å®¡æŸ¥
2. å¯åŠ¨ 5 ä¸ªå¹¶è¡Œ agent è¿›è¡Œæ·±åº¦æ£€æŸ¥
3. å¯¹æ‰€æœ‰å‘ç°çš„é—®é¢˜è¯„åˆ†
4. åªæŠ¥å‘Šé«˜å¯ä¿¡åº¦é—®é¢˜ï¼ˆè¯„åˆ† >= 4ï¼‰
5. åœ¨ GitHub ä¸Šå‘å¸ƒæ ¼å¼åŒ–çš„ review è¯„è®º

### å®¡æŸ¥å¤šä¸ª PR

```bash
> Review all open PRs
```

Claude ä¼šä¾æ¬¡å®¡æŸ¥æ‰€æœ‰æ‰“å¼€çš„ PRã€‚

## å®¡æŸ¥æµç¨‹è¯¦è§£

### ç¬¬ 1 æ­¥ï¼šèµ„æ ¼æ£€æŸ¥
- âŒ å·²å…³é—­çš„ PR â†’ è·³è¿‡
- âŒ Draft PR â†’ è·³è¿‡
- âŒ å·²æœ‰ Claude Code review â†’ è·³è¿‡
- âœ… ç¬¦åˆæ¡ä»¶ â†’ ç»§ç»­

### ç¬¬ 2 æ­¥ï¼šæŸ¥æ‰¾ CLAUDE.md
è‡ªåŠ¨å®šä½ï¼š
- æ ¹ç›®å½• CLAUDE.md
- ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ CLAUDE.md

### ç¬¬ 3 æ­¥ï¼šæå– PR æ‘˜è¦
- PR æè¿°å’Œæ”¹åŠ¨å†…å®¹
- å…³é”®ä¿®æ”¹æ–‡ä»¶
- ä¸»è¦åŠŸèƒ½å˜æ›´

### ç¬¬ 4 æ­¥ï¼š5 ä¸ªå¹¶è¡Œ agent å®¡æŸ¥

#### Agent #1: CLAUDE.md åˆè§„æ€§æ£€æŸ¥
æ£€æŸ¥é¡¹ï¼š
- ä»£ç é£æ ¼ï¼ˆtype hintsã€docstringsã€88 å­—ç¬¦è¡Œé•¿ï¼‰
- æµ‹è¯•è¦æ±‚
- åŒ…ç®¡ç†ï¼ˆåªèƒ½ç”¨ uvï¼Œç¦æ­¢ pipï¼‰
- PEP 8 å‘½åè§„èŒƒ

#### Agent #2: æµ…å±‚ bug æ‰«æ
ä¸“æ³¨äºï¼š
- é€»è¾‘é”™è¯¯
- å˜é‡ä½¿ç”¨é”™è¯¯
- ç¼ºå°‘å…³é”®é”™è¯¯å¤„ç†
- è¿è¡Œæ—¶é”™è¯¯

é¿å…ï¼š
- é£æ ¼é—®é¢˜
- å°é—®é¢˜å’Œå¹æ¯›æ±‚ç–µ
- è¯¯æŠ¥

#### Agent #3: Git å†å²åˆ†æ
æ£€æŸ¥ï¼š
- æ˜¯å¦è¿åå†å²ä»£ç æ¨¡å¼
- æ˜¯å¦é‡å¤å†å² bug
- commit æ¶ˆæ¯ä¸­çš„ç›¸å…³ä¸Šä¸‹æ–‡

#### Agent #4: ä¹‹å‰ PR æ¨¡å¼
åˆ†æï¼š
- æœ€è¿‘ä¿®æ”¹ç›¸åŒæ–‡ä»¶çš„ PR
- é‚£äº› PR ä¸Šçš„ review è¯„è®º
- æ˜¯å¦æœ‰é€‚ç”¨äºå½“å‰ PR çš„å»ºè®®

#### Agent #5: ä»£ç æ³¨é‡Šåˆè§„æ€§
éªŒè¯ï¼š
- æ˜¯å¦éµå¾ª TODO æ³¨é‡Š
- æ˜¯å¦å°Šé‡è­¦å‘Šæ³¨é‡Š
- æ˜¯å¦éµå¾ªä»£ç ä¸­è®°å½•çš„æ¨¡å¼

### ç¬¬ 5 æ­¥ï¼šé—®é¢˜è¯„åˆ†ï¼ˆ0-5 åˆ†ï¼‰

æ¯ä¸ªå‘ç°çš„é—®é¢˜éƒ½ä¼šè¢«ç‹¬ç«‹è¯„åˆ†ï¼š

| åˆ†æ•° | å«ä¹‰ | è¯´æ˜ |
|------|------|------|
| 0 | è¯¯æŠ¥ | ä¸æ˜¯çœŸå®é—®é¢˜æˆ–é¢„å­˜é—®é¢˜ |
| 1 | ä½å¯ä¿¡åº¦ | å¯èƒ½æ˜¯çœŸçš„ä½†å¾ˆå¯èƒ½æ˜¯è¯¯æŠ¥ |
| 2 | ä¸ç¡®å®š | å¯èƒ½æ˜¯çœŸçš„ä½†å¯èƒ½æ˜¯å°é—®é¢˜ |
| 3 | ä¸­ç­‰å¯ä¿¡åº¦ | çœŸå®é—®é¢˜ä½†ä¸ç´§æ€¥ |
| 4 | é«˜å¯ä¿¡åº¦ | çœŸå®é—®é¢˜ï¼Œä¼šå½±å“åŠŸèƒ½ |
| 5 | å…³é”® | ç»å¯¹æ˜¯çœŸå® bugï¼Œä¼šå¯¼è‡´é—®é¢˜ |

### ç¬¬ 6 æ­¥ï¼šè¿‡æ»¤é—®é¢˜
- åªä¿ç•™è¯„åˆ† >= 4 çš„é—®é¢˜
- å¦‚æœæ²¡æœ‰é«˜åˆ†é—®é¢˜ â†’ å‘å¸ƒ"æ— é—®é¢˜"è¯„è®º

### ç¬¬ 7 æ­¥ï¼šé‡æ–°éªŒè¯èµ„æ ¼
- ç¡®ä¿ PR ä»ç„¶æ˜¯æ‰“å¼€çŠ¶æ€
- ç¡®ä¿è¿˜æ²¡æœ‰å…¶ä»– review

### ç¬¬ 8 æ­¥ï¼šå‘å¸ƒ review è¯„è®º
æ ¼å¼åŒ–çš„è¯„è®ºåŒ…å«ï¼š
- å‘ç°çš„é—®é¢˜æ•°é‡
- æ¯ä¸ªé—®é¢˜çš„æè¿°
- å¸¦å®Œæ•´ SHA çš„ä»£ç é“¾æ¥
- CLAUDE.md å¼•ç”¨ï¼ˆå¦‚é€‚ç”¨ï¼‰

## è¯„è®ºæ ¼å¼ç¤ºä¾‹

### å‘ç°é—®é¢˜æ—¶

```markdown
### Code review

Found 3 issues:

1. Missing return statement in `ovo_doc_to_target` function (bug: function computes value but doesn't return it)

https://github.com/EvolvingLMMs-Lab/lmms-eval/blob/831d6d277e0903c434d3e4bd1e2cf9f58757f207/lmms_eval/tasks/ovobench/utils.py#L102-L103

2. All public functions lack docstrings (CLAUDE.md says "Public APIs must have docstrings")

https://github.com/EvolvingLMMs-Lab/lmms-eval/blob/831d6d277e0903c434d3e4bd1e2cf9f58757f207/lmms_eval/tasks/ovobench/utils.py#L17-L165

3. Large blocks of commented-out code (CLAUDE.md says "No dead code or commented out blocks")

https://github.com/EvolvingLMMs-Lab/lmms-eval/blob/831d6d277e0903c434d3e4bd1e2cf9f58757f207/lmms_eval/tasks/ovobench/constant.py#L16-L25

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)

<sub>- If this code review was useful, please react with ğŸ‘. Otherwise, react with ğŸ‘.</sub>
```

### æ— é—®é¢˜æ—¶

```markdown
### Code review

No issues found. Checked for bugs and CLAUDE.md compliance.

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)
```

## å®é™…ä½¿ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹ 1: PR #957 - å‘ç° 4 ä¸ªé—®é¢˜

**è¾“å…¥**ï¼š
```
> Review PR #957
```

**ç»“æœ**ï¼š
- âœ“ æ£€æŸ¥èµ„æ ¼ - é€šè¿‡
- âœ“ å¯åŠ¨ 5 ä¸ªå¹¶è¡Œ agent
- âœ“ å‘ç° 9 ä¸ªæ½œåœ¨é—®é¢˜
- âœ“ è¯„åˆ†åè¿‡æ»¤åˆ° 4 ä¸ªé«˜åˆ†é—®é¢˜
- âœ“ å‘å¸ƒäº†åŒ…å« 4 ä¸ªé—®é¢˜çš„ review

**é—®é¢˜ç±»å‹**ï¼š
1. Missing return statement (score: 5/5)
2. Incomplete function (score: 4/5)
3. Missing docstrings (score: 4/5)
4. Dead code (score: 4/5)

### æ¡ˆä¾‹ 2: PR #945 - æ— é—®é¢˜

**è¾“å…¥**ï¼š
```
> Review PR #945
```

**ç»“æœ**ï¼š
- âœ“ æ£€æŸ¥èµ„æ ¼ - é€šè¿‡
- âœ“ å¯åŠ¨ 5 ä¸ªå¹¶è¡Œ agent
- âœ“ å‘ç° 3 ä¸ªæ½œåœ¨é—®é¢˜
- âœ“ è¯„åˆ†åå…¨éƒ¨ < 4 åˆ†ï¼ˆè¯¯æŠ¥ï¼‰
- âœ“ å‘å¸ƒäº†"æ— é—®é¢˜"è¯„è®º

**è¢«è¿‡æ»¤çš„é—®é¢˜**ï¼š
1. isinstance check (score: 0/5 - å®é™…ä¸Šæ˜¯æ­£ç¡®çš„)
2. Missing tests (score: 1/5 - é¡¹ç›®ä¸­ä¸å¼ºåˆ¶æ‰§è¡Œ)
3. Documentation incomplete (score: 3/5 - éä»£ç é—®é¢˜)

### æ¡ˆä¾‹ 3: PR #959 - è·³è¿‡å®¡æŸ¥

**è¾“å…¥**ï¼š
```
> Review PR #959
```

**ç»“æœ**ï¼š
- âœ“ æ£€æŸ¥èµ„æ ¼ - å¤±è´¥
- âŠ˜ è·³è¿‡ï¼šPR æè¿°ä¸å®Œæ•´ï¼Œä¸ç¬¦åˆæ¨¡æ¿è¦æ±‚

## è¯¯æŠ¥è¿‡æ»¤

Skill ä¼šè‡ªåŠ¨è¿‡æ»¤ä»¥ä¸‹ç±»å‹çš„è¯¯æŠ¥ï¼š

âœ— **é¢„å­˜é—®é¢˜**ï¼šä»£ç ä¸­å·²å­˜åœ¨çš„é—®é¢˜ï¼ˆPR æœªä¿®æ”¹çš„è¡Œï¼‰
âœ— **Linter å¯æ•è·**ï¼šæ ¼å¼åŒ–ã€å¯¼å…¥é”™è¯¯ã€ç±»å‹é”™è¯¯ï¼ˆCI ä¼šæ£€æŸ¥ï¼‰
âœ— **é£æ ¼é—®é¢˜**ï¼šCLAUDE.md ä¸­æœªæ˜ç¡®è¦æ±‚çš„é£æ ¼åå¥½
âœ— **å¹æ¯›æ±‚ç–µ**ï¼šèµ„æ·±å·¥ç¨‹å¸ˆä¸ä¼šæŒ‡å‡ºçš„å°é—®é¢˜
âœ— **å·²å¿½ç•¥çš„é—®é¢˜**ï¼šä»£ç ä¸­æœ‰ lint ignore æ³¨é‡Šçš„
âœ— **åŠŸèƒ½å˜æ›´**ï¼šå¯èƒ½æ˜¯æœ‰æ„ä¸ºä¹‹çš„åŠŸèƒ½æ”¹å˜

## é…ç½®

### ä¿®æ”¹è¯„åˆ†é˜ˆå€¼

é»˜è®¤é˜ˆå€¼æ˜¯ 4 åˆ†ã€‚å¦‚æœæƒ³è¦æ›´ä¸¥æ ¼æˆ–æ›´å®½æ¾ï¼š

```markdown
# åœ¨ SKILL.md çš„ Step 7 ä¸­ä¿®æ”¹
1. Filter issues: Keep only score >= 5  # åªä¿ç•™å…³é”®é—®é¢˜
# æˆ–
1. Filter issues: Keep only score >= 3  # åŒ…å«ä¸­ç­‰å¯ä¿¡åº¦é—®é¢˜
```

### æ·»åŠ è‡ªå®šä¹‰æ£€æŸ¥

å¯ä»¥æ·»åŠ ç¬¬ 6 ä¸ª agent è¿›è¡Œè‡ªå®šä¹‰æ£€æŸ¥ã€‚åœ¨ Step 5 ä¸­æ·»åŠ ï¼š

```markdown
#### Agent #6: Custom Check (Sonnet)
```
Check for project-specific patterns...
```
```

## ä¾èµ–è¦æ±‚

- GitHub CLI (`gh`) å·²å®‰è£…å¹¶è®¤è¯
- å¯¹ä»“åº“æœ‰è®¿é—®æƒé™
- å¯ä»¥åœ¨ PR ä¸Šå‘å¸ƒè¯„è®ºçš„æƒé™

## æ•…éšœæ’é™¤

### Skill æ²¡æœ‰æ¿€æ´»

ç¡®ä¿ä½ çš„é—®é¢˜åŒ…å«è§¦å‘è¯ï¼š
- "review PR"
- "code review"
- "check PR"
- PR ç¼–å·ï¼ˆå¦‚ "#945"ï¼‰

### Agent ç»™å‡ºçŸ›ç›¾çš„è¯„åˆ†

ä¿¡ä»» agent çš„è§£é‡Šæ–‡æœ¬ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•°å­—ã€‚å¦‚æœè§£é‡Šè¯´"ä¸æ˜¯é—®é¢˜"ä½†è¯„åˆ†æ˜¯ 4ï¼Œåº”è§†ä¸ºè¯¯æŠ¥ï¼ˆè¯„åˆ†åº”è¯¥æ˜¯ 0ï¼‰ã€‚

### å‘ç°å¤ªå¤šé—®é¢˜

è¿™å¾ˆå¥½ï¼å¹¶è¡Œ agent æ–¹æ³•ä¼šå‘ç°æ›´å¤šé—®é¢˜ã€‚è¯„åˆ†æ­¥éª¤ä¼šè¿‡æ»¤åˆ°åªæœ‰é«˜å¯ä¿¡åº¦çš„é—®é¢˜ã€‚

å¦‚æœä»ç„¶å¤ªå¤šï¼Œå¯ä»¥æé«˜é˜ˆå€¼åˆ° 5 åˆ†ã€‚

### PR åœ¨å®¡æŸ¥æœŸé—´å‘ç”Ÿå˜åŒ–

é‡æ–°éªŒè¯æ­¥éª¤ï¼ˆStep 7ï¼‰ä¼šæ•è·è¿™ç§æƒ…å†µå¹¶è·³è¿‡å‘å¸ƒã€‚

## æ€§èƒ½

- **å¹³å‡å®¡æŸ¥æ—¶é—´**ï¼š2-3 åˆ†é’Ÿ/PR
  - èµ„æ ¼æ£€æŸ¥ï¼š5 ç§’
  - 5 ä¸ªå¹¶è¡Œ agentï¼š60-90 ç§’
  - é—®é¢˜è¯„åˆ†ï¼ˆå¹¶è¡Œï¼‰ï¼š30-45 ç§’
  - å‘å¸ƒè¯„è®ºï¼š5 ç§’

- **å¹¶è¡ŒåŒ–ä¼˜åŠ¿**ï¼š
  - ä¸²è¡Œæ–¹å¼ï¼šçº¦ 5-7 åˆ†é’Ÿ/PR
  - å¹¶è¡Œæ–¹å¼ï¼šçº¦ 2-3 åˆ†é’Ÿ/PR
  - æ€§èƒ½æå‡ï¼š~60%

## æœ€ä½³å®è·µ

1. **å®šæœŸå®¡æŸ¥**ï¼šæ¯å¤©æˆ–æ¯å‘¨å®¡æŸ¥ä¸€æ¬¡æ‰€æœ‰æ‰“å¼€çš„ PR
2. **ä¿¡ä»»è¯„åˆ†**ï¼šAgent åšäº†æ·±åº¦åˆ†æï¼Œä¿¡ä»»ä»–ä»¬çš„åˆ¤æ–­
3. **åªæŠ¥å‘Šé«˜åˆ†**ï¼šä¸è¦é™ä½é˜ˆå€¼ï¼Œä¿æŒ review çš„é«˜è´¨é‡
4. **å®¡æŸ¥åè·Ÿè¿›**ï¼šæŸ¥çœ‹ PR ä½œè€…çš„å“åº”å¹¶ç»§ç»­è®¨è®º
5. **æ›´æ–° CLAUDE.md**ï¼šæ ¹æ® review å‘ç°çš„é—®é¢˜æ›´æ–°é¡¹ç›®è§„èŒƒ

## å›¢é˜Ÿåä½œ

### æäº¤åˆ° Git

è¿™ä¸ª skill åº”è¯¥æäº¤åˆ°é¡¹ç›®ä»“åº“ï¼š

```bash
git add .claude/skills/pr-code-review/
git commit -m "feat: add automated PR code review skill"
git push
```

### å›¢é˜Ÿä½¿ç”¨

å›¢é˜Ÿæˆå‘˜å¯ä»¥ï¼š
```
> Review PR #123
```

æˆ–è€…è®¾ç½®å®šæœŸå®¡æŸ¥ï¼š
```
> Review all open PRs
```

### å®šåˆ¶åŒ–

æ¯ä¸ªé¡¹ç›®å¯ä»¥ï¼š
- ä¿®æ”¹è¯„åˆ†é˜ˆå€¼
- æ·»åŠ è‡ªå®šä¹‰æ£€æŸ¥ agent
- è°ƒæ•´ CLAUDE.md è§„åˆ™
- è‡ªå®šä¹‰è¯¯æŠ¥è¿‡æ»¤è§„åˆ™

## ç»´æŠ¤

### æ›´æ–° Skill

ä¿®æ”¹ `SKILL.md` åï¼Œé‡å¯ Claude Code ä»¥åŠ è½½æ›´æ–°ã€‚

### ç›‘æ§æ•ˆæœ

è·Ÿè¸ªï¼š
- å‘ç°çš„é—®é¢˜æ•°é‡
- è¯¯æŠ¥ç‡ï¼ˆé€šè¿‡ PR ä½œè€…åé¦ˆï¼‰
- å®¡æŸ¥è¦†ç›–ç‡ï¼ˆå·²å®¡æŸ¥ PR / æ€» PRï¼‰

### æ”¹è¿›å»ºè®®

æ ¹æ®ä½¿ç”¨æƒ…å†µï¼š
- è°ƒæ•´è¯„åˆ†æ ‡å‡†
- æ·»åŠ æ–°çš„æ£€æŸ¥ç»´åº¦
- æ›´æ–°è¯¯æŠ¥è¿‡æ»¤è§„åˆ™
- ä¼˜åŒ– agent æŒ‡ä»¤

## è‡´è°¢

åŸºäº Claude Code çš„ code-review skill å’Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„ PR review æœ€ä½³å®è·µå¼€å‘ã€‚
