dataset_path: stepfun-ai/GEdit-Bench
dataset_kwargs:
  token: True
  load_from_disk: True
task: "gedit_bench"
test_split: train
output_type: generate_until
doc_to_visual: !function utils.gedit_bench_doc_to_visual
doc_to_text: !function utils.gedit_bench_doc_to_text
doc_to_target: "instruction"
generation_kwargs:
  max_new_tokens: 512
  temperature: 0
  top_p: 1.0
  num_beams: 1
  do_sample: false
# The return value of process_results will be used by metrics
process_results: !function utils.gedit_bench_process_results

# ============================================
# Metrics breakdown:
# - Overall scores (all samples)
# - By language: en (English), cn (Chinese)
# - By subset: fullset (all), intersection (subset with both en and cn)
# - Score types: semantics, quality, overall
# ============================================

metric_list:
  # ==========================================
  # Overall Scores (All Samples) - Global Average
  # ==========================================
  - metric: gedit_bench_semantics_score
    aggregation: !function utils.gedit_bench_aggregate_results
    higher_is_better: true
  - metric: gedit_bench_quality_score
    aggregation: !function utils.gedit_bench_aggregate_results
    higher_is_better: true
  - metric: gedit_bench_overall_score
    aggregation: !function utils.gedit_bench_aggregate_results
    higher_is_better: true

  # ==========================================
  # English - Fullset (All English samples)
  # ==========================================
  - metric: gedit_bench_en_fullset_semantics
    aggregation: !function utils.gedit_bench_aggregate_en_fullset_semantics
    higher_is_better: true
  - metric: gedit_bench_en_fullset_quality
    aggregation: !function utils.gedit_bench_aggregate_en_fullset_quality
    higher_is_better: true
  - metric: gedit_bench_en_fullset_overall
    aggregation: !function utils.gedit_bench_aggregate_en_fullset_overall
    higher_is_better: true

  # ==========================================
  # English - Intersection (English samples in intersection set)
  # ==========================================
  - metric: gedit_bench_en_intersection_semantics
    aggregation: !function utils.gedit_bench_aggregate_en_intersection_semantics
    higher_is_better: true
  - metric: gedit_bench_en_intersection_quality
    aggregation: !function utils.gedit_bench_aggregate_en_intersection_quality
    higher_is_better: true
  - metric: gedit_bench_en_intersection_overall
    aggregation: !function utils.gedit_bench_aggregate_en_intersection_overall
    higher_is_better: true

  # ==========================================
  # Chinese - Fullset (All Chinese samples)
  # ==========================================
  - metric: gedit_bench_cn_fullset_semantics
    aggregation: !function utils.gedit_bench_aggregate_cn_fullset_semantics
    higher_is_better: true
  - metric: gedit_bench_cn_fullset_quality
    aggregation: !function utils.gedit_bench_aggregate_cn_fullset_quality
    higher_is_better: true
  - metric: gedit_bench_cn_fullset_overall
    aggregation: !function utils.gedit_bench_aggregate_cn_fullset_overall
    higher_is_better: true

  # ==========================================
  # Chinese - Intersection (Chinese samples in intersection set)
  # ==========================================
  - metric: gedit_bench_cn_intersection_semantics
    aggregation: !function utils.gedit_bench_aggregate_cn_intersection_semantics
    higher_is_better: true
  - metric: gedit_bench_cn_intersection_quality
    aggregation: !function utils.gedit_bench_aggregate_cn_intersection_quality
    higher_is_better: true
  - metric: gedit_bench_cn_intersection_overall
    aggregation: !function utils.gedit_bench_aggregate_cn_intersection_overall
    higher_is_better: true

lmms_eval_specific_kwargs:
  default:
    pre_prompt: ""
    post_prompt: ""
metadata:
  - version: 0.2
    description: "GEdit-Bench with detailed metrics by language (en/cn) and subset (fullset/intersection)"
