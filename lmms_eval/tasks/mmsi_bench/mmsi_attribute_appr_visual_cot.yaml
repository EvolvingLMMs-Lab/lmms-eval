dataset_path: parquet

task: "mmsi_attribute_appr_visual_cot"
dataset_kwargs:
  data_files: /home/aiscuser/lmms-eval-dataset/mmsi_bench_5tasks/attribute_appr.parquet
test_split: train
output_type: generate_until
doc_to_visual: !function utils.msr_doc_to_visual
doc_to_text: !function utils.msr_doc_to_text_with_gen_prompt
doc_to_target: "answer"
process_results: !function utils.msr_process_results

lmms_eval_specific_kwargs:
  default:
    # Stage 1: Image generation prompt
    generation_prompt: "Create a visualization that highlights and labels the visual appearance attributes (color, shape, texture, orientation, count) in the scene. Use annotations, bounding boxes, and labels to make object features and counts clearly visible."
    # Stage 2: Question answering prompt
    pre_prompt: "You are given the original image(s) and a visualization highlighting appearance attributes. Use both to analyze color, shape, texture, orientation, and object counts.\n\n"
    post_prompt: "\n\nBased on your visual observation, answer with the option's letter from the given choices directly. Enclose the option's letter within ``."

generation_kwargs:
  max_new_tokens: 2048
  temperature: 0
  do_sample: False

metric_list:
  - metric: Attribute (Appr.)
    aggregation: !function utils.msr_aggregate_results
    higher_is_better: true

metadata:
  - version: 0.0
  - description: "MMSI-Bench Attribute (Appearance) task with visual CoT two-stage inference"
